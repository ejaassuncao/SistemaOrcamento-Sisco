Array.prototype.BuscarPorId=function(a){for(var b=0;b<this.length;b++)if(parseInt(this[b].ID)===parseInt(a))return angular.copy(this[b]);return null},Array.prototype.isValue=function(a,b){for(var c=0;c<this.length;c++)if(this[c][a]===b)return!0;return!1},Array.prototype.sum=function(a){for(var b=0,c=0;c<this.length;c++)b+=this[c][a];return b},Array.prototype.find=function(a,b,c){for(var d=[],e=0;e<this.length;e++)this[e][a]===b&&d.push(this[e]);return d},Array.prototype.where=function(a,b,c){for(var d=[],e=0;e<this.length;e++)"="===b?this[e][a]===c&&d.push(this[e]):">"===b?this[e][a]>c&&d.push(this[e]):"<"===b?this[e][a]<c&&d.push(this[e]):"!=="===b?this[e][a]!==c&&d.push(this[e]):">=="===b?this[e][a]>=c&&d.push(this[e]):"<=="===b&&this[e][a]<=c&&d.push(this[e]);return d},String.prototype.In=function(){for(var a=this.toString(),b=0;b<arguments.length;b++)if(parseInt(a)===parseInt(arguments[b]))return!0;return!1},String.prototype.toBoolean=function(){var a=this.toString();return"1"===a||"true"===a||"TRUE"===a},String.prototype.MaxLength=function(a){var b=this.toString();return b.substring(0,a)+"..."},String.prototype.isNullOrEmpty=function(){var a=this.toString();return null===a||""===a||"null"===a||void 0===a},String.prototype.toDate=function(){var obj=this.toString();return obj&&(obj=obj.toString().indexOf("/Date(")>-1?new Date(eval("new "+obj.replace("/","").replace("/",""))):obj),obj},String.prototype.isNullOrEmpty=function(a){var b="";return b=""===a||void 0===a||null===a?this.toString():a,null===b||""===b||void 0===b},Number.prototype.In=function(){for(var a=this.toString(),b=0;b<arguments.length;b++)if(parseInt(a)===parseInt(arguments[b]))return!0;return!1},Number.prototype.isNullOrEmpty=function(){var a=this.toString();return null===a||""===a||void 0===a||isNaN(a)},Number.prototype.trunc=function(a){return this.toFixed(a)},Number.prototype.subtrair=function(a){if(!a)return this;if(a.isNullOrEmpty())return 0;var b=parseFloat(this).toFixed(2),c=parseFloat(a).toFixed(2),d=b-c;return d},Number.prototype.subtrairPorcentagem=function(a){if(!a)return this;if(a.isNullOrEmpty())return 0;var b=parseFloat(this).toFixed(2),c=b-b*a;return c},Number.prototype.obterValorDaPorcentagem=function(a){if(!a)return 0;if(a.isNullOrEmpty())return 0;var b=parseFloat(this).toFixed(2),c=b*a;return c},Window.prototype.isNullOrEmpty=function(){var a=this.toString();return null===a||""===a||"null"===a||void 0===a},angular.module("customFilter",[]).filter("cpfFormat",function(){return function(a){if(a){if(11===a.length){var b=a.substring(0,3),c=a.substring(3,6),d=a.substring(6,9),e=a.substring(9,11);return b+"."+c+"."+d+"-"+e}return a}}}).filter("cnpjFilter",function(){return function(a){return a?14===a.lenth?a.substring(0,2)+"."+a.substring(2,5)+"."+a.substring(5,8)+"/"+a.substring(8,12)+"-"+a.substring(12,14):a:void 0}}).filter("cepFilter",function(){return function(a){return a?8===a.length?a.substring(0,2)+"."+a.substring(2,5)+"-"+a.substring(5,8):a:void 0}}).filter("foneFilter",function(){return function(a){return a?10===a.length?"("+a.substring(0,2)+") "+a.substring(2,6)+"-"+a.substring(6,10):11===a.length?"("+a.substring(0,2)+") "+a.substring(2,7)+"-"+a.substring(7,12):a:void 0}}).filter("setMaxLength",function(){return function(a,b){return a?a.length>b?a.substring(0,b-4)+" ...":a:void 0}}).filter("dataFilter",function(){return function(a){if(a){var b=new Date(a),c=b.getDate(),d=b.getMonth()+1,e=b.getFullYear();return c+"/"+d+"/"+e}return a}}),angular.module("rotas",["ngRoute"]).constant("rotasNaoAutenticadas",["/","/recuperar-senha","/xxxx"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"view-partial/autenticacao.html",controller:"autenticacaoCtrl"}).when("/recuperar-senha",{templateUrl:"view-partial/recuperar-senha.html",controller:"recuperarSenhaCtrl"}).when("/home",{templateUrl:"view-partial/home.html",controller:"homeCtrl",pagina:{titulo:"Home",legenda:"SISCO - Sistema de Controle de Orçamento"}}).when("/configuracao",{templateUrl:"view-partial/configuracao.html",controller:"configuracaoCtrl",pagina:{titulo:"Configuração do sistema",legenda:"SISCO - Configurar sistema"}}).when("/estabelecimento/:id",{templateUrl:"view-partial/estabelecimento.html",controller:"estabelecimentoCtrl",pagina:{titulo:"Editar Estabelecimento",legenda:"Dados do estabelecimento"}}).when("/estabelecimento/new",{templateUrl:"view-partial/estabelecimento.html",controller:"estabelecimentoCtrl",pagina:{titulo:"Cadastrar Estabelecimento",legenda:"Dados do estabelecimento"}}).when("/estabelecimento",{templateUrl:"view-partial/estabelecimento-listar.html",controller:"estabelecimentoListarCtrl",pagina:{titulo:"Listar Estabelecimento",legenda:"Dados do estabelecimento"}}).when("/estabelecimento/visualizar/:id",{templateUrl:"view-partial/estabelecimento-visualizar.html",controller:"estabelecimentoCtrl",pagina:{titulo:"Visualizar Estabelecimento",legenda:"Dados do estabelecimento"}}).when("/usuario",{templateUrl:"view-partial/usuario.html",controller:"usuarioCtrl"}).when("/master",{templateUrl:"view-partial/master.html",controller:"masterCtrl",pagina:{titulo:"Cadastrar Master",legenda:"Dados do Master"}}).when("/cliente/:id",{templateUrl:"view-partial/cliente.html",controller:"clienteCtrl",pagina:{titulo:"Editar Clientes",legenda:"Dados do cliente"}}).when("/cliente/new",{templateUrl:"view-partial/cliente.html",controller:"clienteCtrl",pagina:{titulo:"Cadastrar Clientes",legenda:"Dados do cliente"}}).when("/cliente/visualizar/:id",{templateUrl:"view-partial/cliente-visualizar.html",controller:"clienteCtrl",pagina:{titulo:"Visualizar Clientes",legenda:"Dados do cliente"}}).when("/cliente",{templateUrl:"view-partial/cliente-listar.html",controller:"clienteListarCtrl",pagina:{titulo:"Listar Clientes",legenda:"Dados do cliente"}}).when("/categoria",{templateUrl:"view-partial/categoria.html",controller:"categoriaCtrl",pagina:{titulo:"Cadastrar Categoria",legenda:"Dados da Categoria"}}).when("/veiculo",{templateUrl:"view-partial/veiculo-listar.html",controller:"veiculoListarCtrl",pagina:{titulo:"Listar Veículo",legenda:"Listar Veículo"}}).when("/veiculo/new",{templateUrl:"view-partial/veiculo.html",controller:"veiculoCtrl",pagina:{titulo:"Cadastrar Veículo",legenda:"Dados do Veículo"}}).when("/veiculo/editar/:id",{templateUrl:"view-partial/veiculo.html",controller:"veiculoCtrl",pagina:{titulo:"Editar Veículo",legenda:"Editar Veículo"}}).when("/veiculo/visualizar/:id",{templateUrl:"view-partial/veiculo-visualizar.html",controller:"veiculoCtrl",pagina:{titulo:"Visualizar Veículo",legenda:"Visualizar Veículo"}}).when("/pedido",{templateUrl:"view-partial/pedido-listar.html",controller:"pedidoListarCtrl",pagina:{titulo:"Listar Solicitação de Orçamento (Pedido de cotação de preço)",legenda:"Dados de Solicitação de Orçamento (Pedido de cotação de preço)"}}).when("/pedido/listar/:id",{templateUrl:"view-partial/pedido-listar.html",controller:"pedidoListarCtrl",pagina:{titulo:"Listar Solicitação de Orçamento (Pedido de contação de preço)",legenda:"Dados de Solicitação de Orçamento (Pedido de contação de preço)"}}).when("/pedido/editar/:id",{templateUrl:"view-partial/pedido.html",controller:"pedidoCtrl",pagina:{titulo:"Editar Solitação de Orçamento (Pedido de cotação de preço)",legenda:"Dados de Solicitação de Orçamento (Pedido de cotação de preço)"}}).when("/pedido/visualizar/:id",{templateUrl:"view-partial/pedido-visualizar.html",controller:"pedidoCtrl",pagina:{titulo:"Visualizar Solitação de Orçamento (Pedido de cotação de preço)",legenda:"Dados de Solicitação de Orçamento (Pedido de cotação de preço)"}}).when("/pedido/new",{templateUrl:"view-partial/pedido.html",controller:"pedidoCtrl",pagina:{titulo:"Cadastrar Solicitação de Orçamento (Pedido de cotação de preço)",legenda:"Dados de Solicitação de Orçamento (Pedido de cotação de preço)"}}).when("/orcamento/pedido_id=:pedido_id&cliente_id=:cliente_id",{templateUrl:"view-partial/orcamento-listar.html",controller:"orcamentoListarCtrl",pagina:{titulo:"Listar Orçamentos",legenda:"Dados do Orçamento"}}).when("/orcamento/editar/pedido_id=:pedido_id&id=:id&cliente_id=:cliente_id",{templateUrl:"view-partial/orcamento.html",controller:"orcamentoCtrl",pagina:{titulo:"Gerenciar Orçamento",legenda:"Dados do Orçamento"}}).when("/orcamento/visualizar/pedido_id=:pedido_id&id=:id&cliente_id=:cliente_id",{templateUrl:"view-partial/orcamento-visualizar.html",controller:"orcamentoCtrl",pagina:{titulo:"Visualizar Orçamento",legenda:"Dados do Orçamento"}}).when("/orcamento/visualizar-imagem/:id",{templateUrl:"view-partial/visualizar-imagem.html",controller:"imagemCtrl",pagina:{titulo:"Imagens do Orcamento",legenda:"Imagens do orçamento"}}).when("/relatorio",{templateUrl:"view-partial/relatorio.html",controller:"relatorioCtrl",pagina:{titulo:"Visualizar Orçamentos Aprovados",legenda:"Filtros"}}).when("/grupo",{templateUrl:"view-partial/grupo.html",controller:"grupoCtrl",pagina:{titulo:"Cadastrar Grupo",legenda:"Grupos as quais o produto pertence"}}).when("/sub-grupo",{templateUrl:"view-partial/sub-grupo.html",controller:"subGrupoCtrl",pagina:{titulo:"Cadastrar Sub-Grupo",legenda:"Sub-Grupos as quais o produto pertence"}}).when("/produto",{templateUrl:"view-partial/produto-listar.html",controller:"produtoListarCtrl",pagina:{titulo:"Cadastro de Produto",legenda:"Cadastrar Produto"}}).when("/produto/new",{templateUrl:"view-partial/produto.html",controller:"produtoCtrl",pagina:{titulo:"Cadastrar Produto",legenda:"Cadastrar Produto"}}).when("/produto/produto_id=:produto_id&estabelecimento_id=:estabelecimento_id",{templateUrl:"view-partial/produto.html",controller:"produtoCtrl",pagina:{titulo:"Editar de Produto",legenda:"Editar Produto"}}).when("/produto/visualizar/produto_id=:produto_id&estabelecimento_id=:estabelecimento_id",{templateUrl:"view-partial/produto-visualizar.html",controller:"produtoCtrl",pagina:{titulo:"Visualizar Produto",legenda:"Visualização do Produto"}}).when("/consulta-produto",{templateUrl:"view-partial/consulta-produto.html",controller:"consultaCtrl",pagina:{titulo:"",legenda:""}}).when("/licenca",{templateUrl:"view-partial/page.html",controller:"licencaCtrl",pagina:{titulo:"Licença não encontrada",legenda:"Licença não encontrada"}}).otherwise({redirectTo:"/"})}]).service("anonymous",["rotasNaoAutenticadas",function(a){return{get:function(b){var c=!1;return angular.forEach(a,function(a){a===b&&(c=!0)}),c}}}]),angular.module("httpInterceptor",["toaster"]),angular.module("httpInterceptor").factory("httpInterceptor",["$q","toaster","$rootScope","$location",function(a,b,c){return{request:function(b){return b||a.when(b)},requestError:function(b){return a.reject(b)},response:function(d){if(c.$broadcast("fecharLoad"),1===d.data.length){var e=d.data;if(3===parseInt(e[0].Tipo))return angular.forEach(e,function(a,c){b.publicarAdvertencia(a.Mensagem)}),a.reject(d);if(4===parseInt(e[0].Tipo))return angular.forEach(e,function(a,c){b.publicarErro(a.Mensagem)}),a.reject(d)}return d||a.when(d)},responseError:function(d){switch(c.$broadcast("fecharLoad"),d.status){case 400:var e=d.data;e&&e.length?angular.forEach(e,function(a){b.popWarning("Atenção!",a.Mensagem)}):b.popError("Erro!","Requisição inválida! CODE: 400");break;case 404:b.popError("Erro!","Recurso não encontrado! CODE: 404");break;case 401:b.publicarAdvertencia("Autentique-se"),c.deslogar();break;case 403:d.data&&b.popWarning("Atenção!",d.data);break;case 405:b.popError("Erro!","Método não permitido! CODE: 405");break;case 500:d.data&&b.popError("Erro!",d.data);break;default:b.popError("Erro!","Ocorreu um erro inesperado. Informe o Suporte Técnico. CODE: "+d.status)}return a.reject(d)}}}]),angular.module("httpInterceptor").config(["$httpProvider",function(a){a.interceptors.push("httpInterceptor"),a.defaults.withCredentials=!0}]),angular.module("api",["toaster","ui.bootstrap","angularFileUpload"]),angular.module("api").config([function(){$.fn.datepicker.dates["pt-BR"]={days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb","Dom"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa","Do"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar",startDate:0}}]),angular.module("api").service("helper",["$http","toaster","$location","$timeout","$rootScope",function(a,b,c,d,e){var f=c.absUrl(),g=f.search("app"),h=f.substr(0,g)+"server/",i="";return{get:function(b,c,d){return b=h+b+i,b=null===c?b:b+"/"+c,a({method:"GET",url:b}).success(d)},post:function(b,c,d){return e.$broadcast("abrirLoad"),b=h+b+i,a({method:"POST",url:b,data:c}).success(d)},put:function(b,c,d){return b=h+b+i,a({method:"POST",url:b,data:c}).success(d)},msgAdvertencia:function(a){b.publicarAdvertencia(a)},mensagem:function(a){if(null!==a){var c=parseInt(a[0].Tipo);1===c?b.publicarSucesso(a[0].Mensagem):2===c?angular.forEach(a,function(a,c){b.publicarInformacao(a.Mensagem)}):3===c?angular.forEach(a,function(a,c){b.publicarAdvertencia(a.Mensagem)}):4===c&&angular.forEach(a,function(a,c){b.publicarErro(a.Mensagem)})}},redirecionar:function(a,b){""===b||null===b||void 0===b?c.path(a):d(function(){c.path(a)},1e3*b)},toList:function(a){return"null"!==a&&""!==a&&void 0!==a&&null!==a?void 0===a.length?[a]:a:[]},path:function(){return c.absUrl().substr(0,c.absUrl().indexOf("#"))},loadTemplat:function(a){return c.absUrl().substr(0,c.absUrl().indexOf("#"))+"app-config/template/"+a},loadImage:function(a){return c.absUrl().substr(0,c.absUrl().indexOf("#"))+"img/"+a},urlServer:function(){return h},loadingOpen:function(){e.$broadcast("abrirLoad")},loadingClose:function(){e.$broadcast("fecharLoad")},serverUrl:function(a){return h+a+i}}}]),angular.module("api").directive("visualizarRelatorio",["$injector",function(a){return{restrict:"A",link:function(b,c,d){var e=a.get("helper");c.on("click",function(){var a=d.visualizarRelatorio,b=e.urlServer();window.open(b+a,"_blank")})}}}]),angular.module("api").directive("visualizarRelatorio",["$injector",function(a){return{restrict:"AE",link:function(b,c,d){var e=a.get("helper");c.on("click",function(){var a=d.visualizarRelatorio,b=e.urlServer();window.open(b+a,"_blank")})}}}]),angular.module("api").service("upload",["$injector","$modal",function(a,b){var c=a.get("helper");return{open:function(a,d){var e={server:a.server,callback:d,dropZone:a.dropZone?a.dropZone:!1,limiteArquivos:a.limiteArquivos?a.limiteArquivos:1,formData:a.formData,fileAdd:a.fileAdd,autoClose:a.autoClose};b.open({templateUrl:c.loadTemplat("upload.html"),keyboard:!1,size:"lg",backdrop:"static",resolve:{parametro:function(){return e}},controller:["$scope","$modalInstance","parametro","FileUploader","helper",function(a,b,c,d,e){var f=e.serverUrl(c.server);a.view={title:"Anexar arquivos",limiteArquivos:c.limiteArquivos,dropZone:c.dropZone,formData:c.formData,fileAdd:c.fileAdd,autoClose:c.autoClose};var g=a.uploader=new d({url:f,formData:[{data:a.view.formData}]});g.filters.push({name:"customFilter",fn:function(b,c){return this.queue.length<a.view.limiteArquivos}}),a.onClickFecharModal=function(){b.dismiss("cancel")},g.onAfterAddingFile=function(b){null!==a.view.fileAdd&&void 0!==a.view.fileAdd&&a.view.fileAdd(b)},g.onSuccessItem=function(d,e,f,g){c.callback&&c.callback(e),a.view.autoClose&&b.dismiss("cancel")},g.onErrorItem=function(a,b,c,d){angular.isObject($(b).find("p").text())?e.mensagem(angular.fromJson($(b).find("p").text())):e.msgAdvertencia($(b).find("p").text())},g.onSuccess=function(a,c,d){b.dismiss("cancel")},a.Conveter=function(a){function b(a){a=a.toString();for(var b=a.length,c="",d=b-1;d>=0;d--)c=a.charAt(d)+c,a.substr(d).length%3===0&&d>0&&(c="."+c);return c}var c=Math.round(a/1024);return b(c)+"Kb"}}]})}}}]),angular.module("api").directive("loading",["$injector","$timeout",function(a,b){var c=a.get("helper");return{replace:!0,restrict:"EA",scope:!0,require:"?ngModel",templateUrl:c.loadTemplat("loading.html"),link:function(a,d,e){var f=d.find("img");f.attr("src",c.path()+"img/loader.gif"),a.$on("abrirLoad",function(){b(function(){var a=(d.modal({backdrop:"static"}),$(angular.element(".modal-backdrop"))),b=$(a.get(1));b.attr("id","loadin-modal-backdrop").css("z-index","9998")})}),a.$on("fecharLoad",function(){b(function(){var a=(d.modal("hide"),$(angular.element("#loadin-modal-backdrop")));void 0!==a[0]&&a.remove()})})}}}]),angular.module("api").directive("jcarouselFancybox",["$injector","$timeout",function(a,b){var c=a.get("helper"),d=function(a,b){a.onClickRemove=function(b){a.$emit("onClickRemoveImage",b)},a.onClickEdit=function(b,c){var d={nome:b,texto:c};a.$emit("onClickEditImage",d)},b(function(){$(".fancybox").fancybox({helpers:{title:{type:"float"}}})})};return{restrict:"AE",replace:!1,transclude:!1,scope:{images:"=",edit:"@",remove:"@"},templateUrl:c.loadTemplat("carrousel.html"),link:function(a,c,d){var e=$(c).children(".wrapper").children(".jcarousel-wrapper"),f=e.children(".jcarousel");f.jcarousel({wrap:"circular"}),a.$watch(d.images,function(a){f.jcarousel("reload")}),e.children(".jcarousel-control-prev").jcarouselControl({target:"-=1"}),e.children(".jcarousel-control-next").jcarouselControl({target:"+=1"}),d.$observe("refesh",function(){g()}),d.$observe("editar",function(b){a.edit=b,g()}),d.$observe("remover",function(b){a.remove=b,g()});var g=function(){var d=angular.copy(a.images);a.images=[],a.images=d,b(function(){var a=$(c).children(".wrapper").children(".jcarousel-wrapper"),b=a.children(".jcarousel");b.jcarousel("reload");var d=b.children("ul").children("li").children(".fancybox");d.fancybox({helpers:{title:{type:"float"}}})})}},controller:["$scope","$timeout",d]}}]),angular.module("api").directive("select2",["$timeout","helper",function(a,b){var c=0,d=!0,e=!1;return{restrict:"A",scope:{ngModel:"=",ngInitValue:"=",ngAssociated:"&ngAssociated"},link:function(f,g,h,i){h.placeholder=h.placeholder?h.placeholder:"Busque aqui";var j=function(){f.ngAssociated&&!e&&(f.ngAssociated(),e=!0)};g.select2({placeholder:h.placeholder,minimumInputLength:3,allowClear:!0,escapeMarkup:function(a){return a},formatSelection:function(b,c){return a(function(){f.ngModel=b.id,f.ngInitValue=b.item},0),b.text},initSelection:function(b,c){f.ngInitValue&&a(function(){c({id:f.ngInitValue.id,text:f.ngInitValue.texto?f.ngInitValue.texto:h.placeholder,item:angular.copy(f.ngInitValue)}),j()},0)},query:function(d){c++;var e=parseInt(h.wait);if(e=isNaN(e)?500:e,h.url){var f=function(){if(c--,!(c>0)){var a={results:[]};b.get(h.url,d.term,function(c){var e=b.toList(c.Lov);if(null!==e){for(var f=0;f<e.length;f++)a.results.push({id:e[f].id,text:e[f].texto,item:e[f]});d.callback(a)}})}};a(f,e)}}}).on("change",function(b){a(function(){j()},0)}),h.$observe("disabled",function(b){a(function(){var a=angular.element("#s2id_"+h.id);a.trigger("select2:sincronizar")})}),f.ngInitValue&&g.select2("val",f.ngInitValue.ID),f.$watch("ngModel",function(a,b){e=!1,g.select2("val",a)}),a(function(){d=!1},0)}}}]),angular.module("api").directive("datatable",["$timeout",function($timeout){return{restrict:"A",scope:{ngSource:"=",filter:"=",menu:"="},link:function(scope,element,attr,ngModel){element.fadeOut(0);var columnsNotOrder,lengthMenu,pageLength;columnsNotOrder=attr.columnsnotorder,lengthMenu=attr.lengthmenu||"10, 25, 50, 'Todos'",pageLength=attr.pagelength||10,scope.fnGetColumnsNotOrder=function(){var a=[],b=element.find("thead tr th");if(columnsNotOrder){for(var c=0;c<b.length;c++)columnsNotOrder.indexOf(c)>-1?a.push({orderable:!1}):a.push(null);return a}for(var d=0;d<b.length-1;d++)a.push(null);return a.push({orderable:!1}),a},scope.fnGetLengthMenu=function(){var alLengthMenu=[];if(lengthMenu){var attrLengthMenu=eval("["+lengthMenu+"]");if("string"==typeof attrLengthMenu[attrLengthMenu.length-1]){for(var i=0;i<attrLengthMenu.length-1;i++)alLengthMenu.push(attrLengthMenu[i]);return alLengthMenu.push(-1),[alLengthMenu,attrLengthMenu]}for(var interador=0;interador<attrLengthMenu.length;interador++)alLengthMenu.push(attrLengthMenu[interador]);return[alLengthMenu,alLengthMenu]}},scope.fnGetPageLength=function(){return pageLength?(pageLength=parseInt(pageLength),isNaN(pageLength)?scope.fnGetLengthMenu()[0][0]:pageLength):scope.fnGetLengthMenu()[0][0]},scope.fnCreateGrid=function(){$timeout(function(){element.dataTable({filter:scope.filter!==!1,destroy:!0,language:{lengthMenu:"Exibir _MENU_ itens por página.",zeroRecords:"Nenhum registro encontrado.",info:"Item _START_ até _END_ de _TOTAL_ Itens",infoEmpty:"",infoFiltered:"(filtrados de _MAX_ itens no total)",search:'<span title="Busca apenas dados já impresso nesta lista">Busca Rápida:</span>',searchTitle:"Busca apenas dados já impresso nesta lista",paginate:{first:"Primeira",previous:"Anterior",next:"Próxina",last:"Última"}},columns:scope.fnGetColumnsNotOrder(),lengthMenu:scope.fnGetLengthMenu(),pageLength:scope.fnGetPageLength()}),element.removeAttr("style").fadeIn(0),scope.menu===!1?$("#GridView1_length").hide():$("#GridView1_length").show()},0)},scope.fnClearGrid=function(){element.fadeOut(0),element.fnDestroy()},scope.ngSource&&(scope.ngSource.clearGrid=scope.fnClearGrid),scope.$watch("ngSource",function(a,b){a&&$timeout(function(){a.clearGrid=scope.fnClearGrid,scope.fnCreateGrid()},0)}),scope.fnCreateGrid()}}}]),angular.module("api").directive("chosen",[function(){var a,b,c,d,e=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};return b=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,a=["noResultsText","allowSingleDeselect","disableSearchThreshold","disableSearch","enableSplitWordSearch","inheritSelectClasses","maxSelectedOptions","placeholderTextMultiple","placeholderTextSingle","searchContains","singleBackstrokeDelete","displayDisabledOptions","displaySelectedOptions","width"],d=function(a){return a.replace(/[A-Z]/g,function(a){return"_"+a.toLowerCase()})},c=function(a){var b;if(angular.isArray(a))return 0===a.length;if(angular.isObject(a))for(b in a)if(a.hasOwnProperty(b))return!1;return!0},{restrict:"A",require:"?ngModel",terminal:!0,link:function(f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v;return g.addClass("localytics-chosen"),p=f.$eval(h.chosen)||{},angular.forEach(h,function(b,c){return e.call(a,c)>=0?(p[d(c)]=f.$eval(b),p[d(c)]):void 0}),s=function(){return g.addClass("loading").trigger("chosen:updated")},t=function(){return g.removeClass("loading").trigger("chosen:updated")},j=null,k=null,m=!1,n=function(){return j?g.trigger("chosen:updated"):(p.no_results_text||(p.no_results_text="Sem resultados para:"),j=g.chosen(p).data("chosen"),k=j.default_text)},r=function(){return m=!1,g.attr("data-placeholder",k)},l=function(){return m=!0,g.attr("data-placeholder",j.results_none_found).trigger("chosen:updated")},i?(q=i.$render,i.$render=function(){return q(),n()},h.multiple&&(v=function(){return i.$viewValue},f.$watch(v,i.$render,!0))):n(),h.$observe("disabled",function(){return g.trigger("chosen:updated")}),h.ngOptions&&i?(o=h.ngOptions.match(b),u=o[7],f.$watchCollection(u,function(a,b){return angular.isUndefined(a)?s():(m&&r(),t(),c(a)?l():void 0)})):void 0}}}]),angular.module("api").directive("maskRegex",[function(){return{restrict:"A",link:function(a,b,c){c.$set("data-inputmask-regex",c.maskRegex),b.inputmask("Regex")}}}]),angular.module("api").directive("maskInput",[function(){return{restrict:"A",link:function(a,b,c){b.inputmask(c.maskInput)}}}]),angular.module("api").directive("maskEmail",[function(){return{restrict:"A",link:function(a,b,c){b.inputmask({mask:"*{1,20}[.*{1,20}][.*{1,20}][.*{1,20}]@*{1,20}[.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(a,b){return a=a.toLowerCase(),a.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}})}}}]),angular.module("api").directive("datepicker2",[function(){return{restrict:"A",link:function(a,b,c,d){var e=b.closest("div.input-group.date");e.datepicker({format:"dd/mm/yyyy",language:"pt-BR",autoclose:!0,placeholder:null})}}}]),angular.module("api").directive("ngAutocomplete",["$injector",function(a){var b=a.get("helper");return{restrict:"A",scope:{codigo:"=",funcao:"&"},link:function(a,c,d,e){a.availableTags=[],c.on("blur",function(){function b(a,b){for(var c=0;c<a.length;c++){var d=a[c];return d.descricao.trim().toLowerCase()===b.trim().toLowerCase()?d.id:0}}a.codigo=b(a.availableTags,c.val()),a.$watch("funcao",function(b,c){a.funcao()})}),c.on("keyup",function(d,e){if(c.val().length>2){var f=c.attr("ng-autocomplete");b.get(f,c.val(),function(d){parseInt(b.toList(d)[0].id)>0&&(a.availableTags=b.toList(d));for(var e=[],f=0;f<a.availableTags.length;f++){var g=a.availableTags[f];parseInt(g.id)>0&&e.push(g.descricao)}c.autocomplete({source:e})})}})}}}]),angular.module("api").directive("ngEnter",[function(){return{restrict:"A",link:function(a,b,c){b.bind("keyup",function(b){13!==b.keyCode&&13!==b.which||a.$apply(function(){a.$eval(c.ngEnter)})})}}}]),angular.module("api").directive("hbChat",["$injector",function(a){var b=a.get("helper"),c=function(a,b){function c(){return{mostar_usuarios:!a.chat.dados&&a.chat.visivel&&a.chat.minimize===!1,usuario:a.user.Id,grupo:a.chat.grupo,amigo:a.user.amigo,nivel_remetente:a.UserNivel(),nivel_destinatario:a.user.nivel_destinatario,max_row:a.chat.max_row}}function d(c){a.UserNivel()&&b.put("Chat/BuscarGrupos",c,function(a){e(a)})}function e(b){b.atualizado&&(a.chat.dados=b.dados),b.list=a.toList(b.list),b.list.length>0&&(a.chat.list||(a.chat.list=[]),a.chat.max_row=b.list.reduce(function(a,b){return a}).id,a.chat.list=b.list),a.chat.visivel&&!a.chat.minimize||(a.chat.numAlert=parseInt(b.total_alert)),parseInt(b.outro_usuario_chamando)>0&&(a.chat.numAlert=parseInt(b.outro_usuario_chamando))}function f(){clearInterval(a.chat.auto_refresh),a.chat.auto_refresh=setInterval(a.chat.init,a.chat.intervalo)}a.chat={visivel:!1,minimize:!1,numAlert:0,collapseOne:0,grupo:!0,max_row:0,intervalo:6e4,auto_refresh:null,loading:!1,src:b.loadImage("chat-loader.gif"),ball_verde:b.loadImage("ball_green.png"),ball_vermelho:b.loadImage("ball_red.png")},a.chat.minimizar=function(){a.chat.minimize=!0,a.chat.intervalo=5e3,f()},a.chat.fechar=function(){a.chat.visivel=!1,a.chat.grupo=!0,a.chat.intervalo=6e4,f()},a.chat.maximizar=function(){a.chat.minimize=!1,a.chat.intervalo=5e3,f()},a.chat.init=function(){a.promessa(function(){d(c())})},a.chat.abrirChat=function(){return a.chat.visivel?void a.chat.fechar():(a.chat.visivel=!0,a.chat.numAlert=0,a.chat.minimize=!1,a.chat.intervalo=5e3,void f())},a.chat.verMensagem=function(b,c){a.user.amigo=b,a.user.nivel_destinatario=c,a.chat.max_row=0,a.chat.grupo=!1,a.chat.list=[]},a.chat.historico=function(){a.chat.loading=!0,a.chat.max_row=0,b.put("Chat/Historico",c(),function(b){e(b),a.chat.loading=!1})},a.chat.cadastrar=function(){a.repositorio={},a.repositorio.remetente=a.user.Id,a.repositorio.destinatario=a.user.amigo,a.repositorio.msg=a.chat.msg,a.repositorio.nivel_remetente=a.UserNivel(),a.repositorio.nivel_destinatario=a.user.nivel_destinatario;var c=angular.copy(a.repositorio);a.chat.msg="",""!==c.msg&&b.put("Chat/Cadastrar",c,function(b){a.chat.init()})},f()};return{replace:!0,restrict:"AE",templateUrl:b.loadTemplat("chat.html"),controller:["$scope","helper",c]}}]),angular.module("app",["toaster","rotas","httpInterceptor","api","ui.utils.masks","customFilter","bootstrapLightbox"]),angular.module("app").run(["$rootScope","helper","userService","anonymous","$modal","$timeout","$injector","servico",function(a,b,c,d,e,f,g,h){function i(a){return date1=new Date(a),date2=new Date,date1-date2}function j(){a.dataHora=new Date,a.consultarSessao=parseInt(a.consultarSessao)+1,parseInt(a.consultarSessao)===k&&c.isLogado(function(c){c||b.redirecionar("/"),a.consultarSessao=0}),f(j,1e3)}$(document).ready(function(){$(".jquery-waiting-base-container").fadeOut("slow")}),a.promessa=function(a){f(function(){a()})},a.lovStatus=h.lovStatus(),a.toList=function(a){return b.toList(a)},a.sistema={titulo:"SISCO - Sistema de Controle de Orçamento",saudacao:"Bem vindo",rodape1:"&nbsp;&nbsp;&regSISCO - Sistema de Controle de Orçamento",rodape2:"&copy;Todos os direitos reservados",version:"1.6.1.0",lancamento:"14/03/2016",display:i("2016/03/31"),autor:"suporte@ewati.com.br",product:'Produzido pela: <a style="color:#ffff;" href="http://cbasistema.com.br" target="_blank">cbasistema.com.br</a>',menu:!1,tela:{titulo:"",legenda:""}},a.pagina={titulo:"",legenda:""},a.abrirModal=function(a,b,c,d){e.open({templateUrl:a,controller:b,size:c,keyboard:!1,backdrop:"static",resolve:{param:function(){return d}}})},a.confirm=function(a,c){var d={titulo:a,funcao:c};e.open({templateUrl:b.loadTemplat("confirm.html"),controller:["$scope","$modalInstance","param",function(a,b,c){a.view={titulo:c.titulo},a.Ok=function(){c.funcao(),b.dismiss("cancel")},a.No=function(){b.dismiss("cancel")},a.onClickFecharModal=function(){b.dismiss("cancel")}}],size:null,keyboard:!1,backdrop:"static",resolve:{param:function(){return d}}})},a.ImprimirNoBrower=function(a){var b=document.getElementById(a).innerHTML;tela_impressao=window.open("about:blank"),tela_impressao.document.write(b),tela_impressao.window.print(),tela_impressao.window.close()},permissao=g.get("permissao"),a.user={Nivel:""},a.consultarSessao=0;var k=360;a.UserNivel=function(){return parseInt(c.get().Nivel)},a.UserAtivo=function(){return parseInt(c.get().Ativo)},a.UserCodigo=function(){return parseInt(c.get().Id)},a.onClickDeslogar=function(){b.get("User/Deslogar",null,function(){a.deslogar()})},a.deslogar=function(){a.sistema.menu=!1,a.chat.fechar(),c.destroy(),b.redirecionar("/")},b.post("User/BuscarUsuarioLogado",a.sistema,function(){}),a.EditarSenha=function(){var a={tabela_id:1,tabela_nome:"2"===c.get().Nivel?"cliente":"estabelecimento",usuario_id:c.get().Id,nome:c.get().Nome,nivel:c.get().Nivel,email:c.get().Login,editarEmailEhSenha:!1};c.abrirModal(a)},j(),a.$on("$routeChangeStart",function(e,f,g){var h=e.currentScope.pagina;h.titulo="",h.legenda="";var i=f.pagina;void 0!==i&&(h.titulo=i.titulo,h.legenda=i.legenda);var j=void 0!==f.$$route?f.$$route.originalPath:"";""!==j&&void 0!==j&&c.isLogado(function(f){d.get(j)?"/"===j&&f===!0&&(e.preventDefault(),b.redirecionar("home")):f?(a.user=c.get(),a.sistema.menu=!0,permissao.isPermition(j)||b.redirecionar("home")):a.deslogar()})})}]),angular.module("app").service("userService",["$rootScope","helper",function(a,b){var c={Id:"",Nome:"",Login:"",Nivel:"",Ativo:""},d={};return d.criarUser=function(a){c.Id=a.id,c.Nome=a.nome,c.Login=a.email,c.Nivel=a.nivel,c.Ativo=a.ativo},d.destroy=function(){c={Id:"",Nome:"",Login:"",Nivel:"",Ativo:""},a.MeuMenu=null},d.get=function(){return c},d.existeUsuario=function(){return c.Id>0},d.isLogado=function(a){b.get("User/BuscarUsuarioLogado",null,function(c){return"notLicence"===c?void b.redirecionar("/licenca"):void(c.id>0&&null!==c.id&&void 0!==c.id&&""!==c.id?(d.criarUser(c),a(!0)):(d.destroy(),a(!1)))})},d.abrirModal=function(b){a.abrirModal("view-partial/usuario.html","usuarioCtrl",null,b)},d}]),angular.module("app").service("servico",["helper",function(a){return{getMunicipios:function(b,c){a.get("Endereco/Cidade",b,c)},lovStatus:function(){return angular.copy([{id:"",descricao:"***Selecione***"},{id:"1",descricao:"Ativo"},{id:"2",descricao:"Inativo"}])}}}]),angular.module("app").service("serviceModel",[function(){return{veiculo:function(){return angular.copy({id:null,cliente_id:null,marca_modelo:null,placa:null,ano_fabricacao:null,ano_modelo:null,chassi:null,renavam:null,ativo:""})}}}]),angular.module("app").constant("menuItems",[{Nome:"Solicitação",Rota:"#/pedido",Nivel:[1,2,3],Ativo:!1,Visualizar:!0},{Nome:"Cliente",Rota:"#/cliente",Nivel:[1,2],Ativo:!1,Visualizar:!0},{Nome:"Estabelecimento",Rota:"#/estabelecimento",
Nivel:[1,3],Ativo:!1,Visualizar:!0},{Nome:"Categoria",Rota:"#/categoria",Nivel:[1],Ativo:!1,Visualizar:!0},{Nome:"Veículo",Rota:"#/veiculo",Nivel:[1,2],Ativo:!1,Visualizar:!0},{Nome:"Relatório",Rota:"#/relatorio",Nivel:[1,2,3],Ativo:!1,Visualizar:!0},{Nome:"Produto",Nivel:[1,2,3],Ativo:!1,Visualizar:!0,subItem:[{Nome:"Produto",Rota:"#/produto",Nivel:[1,2,3],Ativo:!1,Visualizar:!0},{Nome:"Sub-Grupo",Rota:"#/sub-grupo",Nivel:[1,3],Ativo:!1,Visualizar:!0},{Nome:"Grupo",Rota:"#/grupo",Nivel:[1,3],Ativo:!1,Visualizar:!0}]},{Nome:"Orçamento",Rota:"#/orcamento",Nivel:[1,2,3],Ativo:!1,Visualizar:!1},{Nome:"Configuração",Rota:"#/master",Nivel:[1],Ativo:!1,Visualizar:!1},{Nome:"Configuração",Rota:"#/configuracao",Nivel:[1,2,3],Ativo:!1,Visualizar:!1}]),angular.module("app").controller("MenuCtrl",["$rootScope","menuItems","userService",function(a,b,c){a.GetMenus=function(){var c=parseInt(a.user.Nivel);if(0>c)return null;for(var d=0;d<b.length;d++)if(b[d].Ativo=b[d].Nivel.indexOf(c)>-1&&b[d].Visualizar===!0,void 0!==b[d].subItem){b[d]["class"]="dropdown-toggle",b[d].data="dropdown",b[d].Rota="?";var e=b[d].subItem;angular.forEach(e,function(a){a.Ativo=a.Nivel.indexOf(c)>-1&&a.Visualizar===!0})}return b}}]),angular.module("app").service("permissao",["$rootScope","menuItems",function(a,b){return{isPermition:function(c){var d=parseInt(a.user.Nivel);if(retorno=!1,0>d)return!0;for(var e=0;e<b.length;e++)if(void 0!==b[e].subItem)angular.forEach(b[e].subItem,function(a){var b=a.Rota.replace("#",""),e=c.substr(0,b.length);return b===e?(retorno=a.Nivel.indexOf(d)>-1,retorno):void 0});else{var f=b[e].Rota.replace("#",""),g=c.substr(0,f.length);if(f===g)return retorno=b[e].Nivel.indexOf(d)>-1,retorno}return retorno}}}]);