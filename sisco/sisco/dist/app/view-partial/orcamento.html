<meta charset="UTF-8"><h3 class="title">{{pagina.titulo}}</h3><fieldset class="fieldset box"><legend>{{pagina.legenda}}</legend><div class="row"><div class="col-lg-3"><label for="Id">Número</label><input id="pedido_id" type="text" class="form-control" ng-model="dados.pedido_id" disabled="disabled"></div><div class="col-lg-3"><label for="situacao">Situação</label><select id="situacao" class="form-control" ng-model="dados.situacao_id" ng-disabled="true" ng-options="item.id as item.descricao for item in toList(dadosLov.situacao)"><option value="">***Selecione***</option></select></div><div class="col-lg-6"><label for="Observacao">Descrição do serviço*</label><input id="Observacao" ng-disabled="true" type="text" class="form-control" ng-model="dadosLov.pedido.observacao" maxlength="80"></div></div><div class="row"><div class="col-lg-5"><label for="marca_modelo">Marca/Modelo*</label><input id="marca_modelo" disabled="disabled" type="text" class="form-control" ng-model="dadosLov.pedido.marca_modelo" maxlength="60"></div><div class="col-lg-3"><label for="placa">Placa*</label><input id="placa" disabled="disabled" type="text" class="form-control" ng-model="dadosLov.pedido.placa" maxlength="7"></div><div class="col-lg-2"><label for="ano_fabricacao">Ano Fabricação*</label><input id="ano_fabricacao" disabled="disabled" type="text" class="form-control" ng-model="dadosLov.pedido.ano_fabricacao" maxlength="4"></div><div class="col-lg-2"><label for="Ano_modelo">Ano Modelo*</label><input id="Ano_modelo" disabled="disabled" type="text" class="form-control" ng-model="dadosLov.pedido.ano_modelo" maxlength="4"></div></div><div class="row"><div class="col-lg-4"><label for="classi">Chassi</label><input id="chassi" disabled="disabled" type="text" class="form-control" ng-model="dadosLov.pedido.chassi" maxlength="20"></div><div class="col-lg-2"><label for="Renavam">KM</label><input id="Renavam" type="text" class="form-control" ng-model="dadosLov.pedido.km" maxlength="12" ui-number-mask="0" disabled="disabled"></div><div class="col-lg-6"><label for="Renavam">Cód Renavam</label><input id="Renavam" disabled="disabled" type="text" class="form-control" ng-model="dadosLov.pedido.renavam" maxlength="30"></div></div><div class="row" ng-show="view.isAdm"><div class="col-lg-6"><label for="cliente">Estabelecimento*</label><input type="hidden" id="estabelecimento" class="form-control" select2 ng-disabled="view.salvar" ng-init-value="dadosLov.estabelecimento" placeholder="Busque o estabelecimento" url="Estabelecimento/BuscarPorNome" ng-model="dados.estabelecimento_id"></div></div><div class="row"><div class="col-lg-2"><label for="prazo_entrega">Prazo Entrega*</label><select id="prazo_entrega" class="form-control" ng-disabled="view.salvar" ng-model="dados.prazo_entrega"><option selected="selected" value="">***Selecione***</option><option value="1">1 dia</option><option value="3">Até 3 dias</option><option value="6">Até 6 dias</option><option value="12">Até 12 dias</option><option value="20">Até 20 dias</option><option value="30">Até 30 dias</option><option value="31">Mais de 30 dias</option></select></div><div class="col-lg-2"><label for="total">Sub Total</label><input type="text" id="sub_total" class="form-control" disabled="disabled" value="{{dados.sub_total=(dados.sub_total_produto +  dados.sub_total_servico) | currency}}"></div><div class="col-lg-2"><label for="total">Desconto</label><input type="text" id="total" class="form-control" disabled="disabled" value="{{dados.desconto=(dados.sub_total_produto.obterValorDaPorcentagem(dados.desconto_produto) +  dados.sub_total_servico.obterValorDaPorcentagem(dados.desconto_servico)) | currency}}"></div><div class="col-lg-2"><label for="total">Total</label><input type="text" id="total" class="form-control" disabled="disabled" value="{{dados.valor_total=(dados.total_produto +  dados.total_servico) | currency}}"></div><div class="col-lg-4 pull-right"><div class="btn-group pull-right" style="margin-top: 31px"><a class="btn btn-default" ng-click="onClickSalvarEhEnviar()" ng-hide="view.salvar">Salvar <i class="glyphicon glyphicon-ok"></i> </a><a class="btn btn-default" ng-click="view.salvar=false;view.editar=true" ng-show="view.salvar && dados.situacao_id.In(3)">Editar <i class="glyphicon glyphicon-pencil"></i> </a><a class="btn btn-default" ng-click="onClickDesfazer()" ng-show="view.editar">Desfazer <i class="glyphicon glyphicon-share-alt"></i></a><a class="btn btn-default" ng-click="onClickEnviar()" ng-show="dados.situacao_id.In(3) && view.editar===false && dados.id > 0">Enviar <i class="glyphicon glyphicon-open"></i> </a><a class="btn btn-default" ng-click="onClickCancelar()" ng-show="dados.situacao_id.In(6)">Cancelar <i class="glyphicon glyphicon-ban-circle"></i></a><a href="javascript:window.history.go(-1)" class="btn btn-primary">Voltar&nbsp; <i class="glyphicon glyphicon-share-alt"></i></a></div></div></div></fieldset><fieldset class="fieldset box" ng-show="dados.id>0"><legend class="cursor" ng-click="(view.verImagem)?view.verImagem=false:view.verImagem=true">Cadastrar Imagens({{(view.verImagem)?'-':'+'}})</legend><div ng-show="view.verImagem"><div class="row"><div class="col-lg-12"><div class="btn-group pull-right"><button class="btn btn-default" ng-click="onClikAtualizarImagem()">Atualizar&nbsp;<i class="glyphicon glyphicon-repeat"></i></button> <button class="btn btn-default" ng-click="onclickAbrirUpload()" ng-hide="view.salvar">Upload &nbsp;<i class="glyphicon glyphicon-cloud-upload"></i></button></div></div></div><div class="row"><div class="col-lg-12" ng-show="images.length > 0"><jcarousel-fancybox images="images" refesh="{{images.length}}" editar="{{!view.salvar}}" remover="{{!view.salvar}}"></div></div></div></fieldset><fieldset class="fieldset box" ng-hide="dadosLov.pedido.servico.In(1)"><legend>Informe o valor unitário de cada Item</legend><div class="row" ng-show="dadosLov.pedido.inserir_item.In(1)"><div class="col-lg-5"><label for="descricao">Descrição*</label><div class="input-group"><input id="descricao" type="text" class="form-control" ng-model="item.descricao" ng-disabled="view.salvar" maxlength="80"> <span class="input-group-btn"><a ng-disabled="view.salvar" ng-click="onClickListarProdutos()" title="Pesquisar Produto" class="btn btn-default pull-right">&nbsp;<i class="glyphicon glyphicon-search"></i></a></span></div></div><div class="col-lg-2"><label for="qdt">Qtd*</label><input id="qdt" type="text" class="form-control" ng-model="item.quantidade" ui-number-mask="0" ng-disabled="view.salvar" maxlength="12"></div><div class="col-lg-2"><label for="qdt">Vlr. Un.*</label><input id="qdt" type="text" class="form-control" ng-model="item.preco_unitario" ui-money-mask ng-disabled="view.salvar" maxlength="12"></div><div class="col-lg-3"><a class="btn btn-default pull-right" style="margin-top: 10%" ng-disabled="view.salvar" ng-click="(view.salvar)?false:onClickItemAdicionar()" ng-hide="view.editarItem">Adicionar&nbsp;<i class="glyphicon glyphicon-plus"></i> </a><a class="btn btn-default pull-right" style="margin-top: 10%" ng-disabled="view.salvar" ng-click="onClickItemSalvar()" ng-show="view.editarItem">Salvar&nbsp;<i class="glyphicon glyphicon-ok"></i> </a><a class="btn btn-default pull-right" style="margin-top: 10%" ng-disabled="view.salvar" ng-click="onClickItemCancelar()" ng-show="view.editarItem">Cancelar&nbsp;<i class="glyphicon glyphicon-remove"></i></a></div></div><br><div class="row"><div class="col-lg-12"><table class="table table-bordered table-striped table-hover table-condensed cf"><thead><tr class="title-table"><th class="col-lg-1">cód</th><th class="col-lg-5">Descrição</th><th class="col-lg-1">Qtd</th><th class="col-lg-2">Preço Un.</th><th class="col-lg-2">Total</th><th class="col-lg-1" ng-show="dadosLov.pedido.inserir_item.In(1)"></th></tr></thead><tbody><tr ng-repeat="item in dadosLov.item"><td>{{item.item_id}}</td><td>{{item.descricao}}</td><td>{{item.quantidade}}</td><td><input type="text" ng-model="item.preco_unitario" ng-disabled="view.salvar" class="form-control" ui-money-mask value="{{item.preco_unitario | currency}}"></td><td>{{(item.total = item.preco_unitario * item.quantidade) | currency}}</td><td ng-show="dadosLov.pedido.inserir_item.In(1)"><a class="btn btn-default btn-xs" ng-disabled="view.salvar" ng-click="onClickEditarItem($index)"><i class="glyphicon glyphicon-pencil"></i> </a><a class="btn btn-default btn-xs" ng-disabled="view.salvar" ng-click="onClickItemRemover($index)"><i class="glyphicon glyphicon-remove"></i></a></td></tr><tr ng-hide="!(dadosLov.item.length > 0)"><td colspan="1" align="right"><strong>Desconto%:</strong></td><td colspan="1"><input type="text" id="desconto_produto" class="form-control col-lg-3" maxlength="7" ng-model="dados.desconto_produto" ui-percentage-mask="2" ng-disabled="view.salvar"> <span class="pull-right"><strong>Vlr. Desconto: </strong>{{dados.sub_total_produto.obterValorDaPorcentagem(dados.desconto_produto) | currency}}</span></td><td colspan="2"><strong>Sub-Total em produtos: </strong>{{dados.sub_total_produto=dadosLov.item.sum('total') | currency}}</td><td colspan="2"><strong>Total em produtos: </strong>{{dados.total_produto=dados.sub_total_produto.subtrairPorcentagem(dados.desconto_produto) | currency}}</td></tr><tr ng-show="!(dadosLov.item.length > 0)"><td colspan="6" align="center">Não há itens cadastrados</td></tr></tbody></table></div></div></fieldset><fieldset class="fieldset box" ng-show="dadosLov.pedido.servico.In(1)"><legend>Cadastrar Produtos</legend><div class="row"><div class="col-lg-5"><label for="descricao">Descrição*</label><input id="descricao" type="text" class="form-control" ng-model="item.descricao" ng-disabled="view.salvar" maxlength="80"></div><div class="col-lg-2"><label for="qdt">Qtd*</label><input id="qdt" type="text" class="form-control" ng-model="item.quantidade" ui-number-mask ng-disabled="view.salvar" maxlength="12"></div><div class="col-lg-2"><label for="qdt">Vlr. Un.*</label><input id="qdt" type="text" class="form-control" ng-model="item.preco_unitario" ui-money-mask ng-disabled="view.salvar" maxlength="12"></div><div class="col-lg-3"><a class="btn btn-default pull-right" style="margin-top: 10%" ng-disabled="view.salvar" ng-click="(view.salvar)?false:onClickItemAdicionar()" ng-hide="view.editarItem">Adicionar&nbsp;<i class="glyphicon glyphicon-plus"></i> </a><a class="btn btn-default pull-right" style="margin-top: 10%" ng-disabled="view.salvar" ng-click="onClickItemSalvar()" ng-show="view.editarItem">Salvar&nbsp;<i class="glyphicon glyphicon-ok"></i> </a><a class="btn btn-default pull-right" style="margin-top: 10%" ng-disabled="view.salvar" ng-click="onClickItemCancelar()" ng-show="view.editarItem">Cancelar&nbsp;<i class="glyphicon glyphicon-remove"></i></a></div></div><br><div class="row"><div class="col-lg-12"><table class="table table-bordered table-striped table-hover table-condensed cf"><thead><tr class="title-table"><th class="col-lg-1">contagem</th><th class="col-lg-5">Descrição</th><th class="col-lg-1">Quantidade</th><th class="col-lg-2">Preço Un.</th><th class="col-lg-2">Total</th><th class="col-lg-1" ng-disabled="view.salvar">Ações</th></tr></thead><tbody><tr ng-repeat="item in dadosLov.item"><td>{{$index+1}}</td><td>{{item.descricao}}</td><td>{{item.quantidade}}</td><td>{{item.preco_unitario | currency}}</td><td>{{(item.total =item.preco_unitario * item.quantidade) | currency}}</td><td><a class="btn btn-default btn-xs" ng-disabled="view.salvar" ng-click="onClickEditarItem($index)"><i class="glyphicon glyphicon-pencil"></i> </a><a class="btn btn-default btn-xs" ng-disabled="view.salvar" ng-click="onClickItemRemover($index)"><i class="glyphicon glyphicon-remove"></i></a></td></tr><tr ng-hide="!(dadosLov.item.length > 0)"><td colspan="1" align="right"><strong>Desconto%:</strong></td><td colspan="1"><input type="text" id="desconto_produto" class="form-control col-lg-3" maxlength="7" ng-model="dados.desconto_produto" ui-percentage-mask="2" ng-disabled="view.salvar"> <span class="pull-right"><strong>Vlr. Desconto: </strong>{{dados.sub_total_produto.obterValorDaPorcentagem(dados.desconto_produto) | currency}}</span></td><td colspan="2"><strong>Sub-Total em produtos: </strong>{{dados.sub_total_produto=dadosLov.item.sum('total') | currency}}</td><td colspan="2"><strong>Total em produtos: </strong>{{dados.total_produto=dados.sub_total_produto.subtrairPorcentagem(dados.desconto_produto) | currency}}</td></tr><tr ng-show="!(dadosLov.item.length > 0)"><td colspan="6" align="center">Não há itens cadastrados</td></tr></tbody></table></div></div></fieldset><fieldset class="fieldset box"><legend>Cadastrar Servicos</legend><div class="row"><div class="col-lg-5"><label for="descricao">Descrição*</label><input id="descricao" type="text" class="form-control" ng-model="servico.descricao" ng-disabled="view.salvar" maxlength="80"></div><div class="col-lg-2"><label for="qdt">Qtd*</label><input id="qdt" type="text" class="form-control" ng-model="servico.quantidade" ui-number-mask="2" ng-disabled="view.salvar" maxlength="12"></div><div class="col-lg-2"><label for="qdt">Vlr. Un.*</label><input id="qdt" type="text" class="form-control" ng-model="servico.preco_unitario" ui-money-mask ng-disabled="view.salvar" maxlength="12"></div><div class="col-lg-3"><a class="btn btn-default pull-right" style="margin-top: 10%" ng-disabled="view.salvar" ng-click="(view.salvar)?false:onClickServicoAdicionar()" ng-hide="view.editarServico">Adicionar&nbsp;<i class="glyphicon glyphicon-plus"></i> </a><a class="btn btn-default pull-right" style="margin-top: 10%" ng-disabled="view.salvar" ng-click="onClickServicoSalvar()" ng-show="view.editarServico">Salvar&nbsp;<i class="glyphicon glyphicon-ok"></i> </a><a class="btn btn-default pull-right" style="margin-top: 10%" ng-disabled="view.salvar" ng-click="onClickItemCancelar()" ng-show="view.editarServico">Cancelar&nbsp;<i class="glyphicon glyphicon-remove"></i></a></div></div><br><div class="row"><div class="col-lg-12"><table class="table table-bordered table-striped table-hover table-condensed cf"><thead><tr class="title-table"><th class="col-lg-1">contagem</th><th class="col-lg-5">Descrição</th><th class="col-lg-1">Quantidade</th><th class="col-lg-2">Preço Un.</th><th class="col-lg-2">Total</th><th class="col-lg-1" ng-disabled="view.salvar">Ações</th></tr></thead><tbody><tr ng-repeat="item in dadosLov.servico"><td>{{$index+1}}</td><td>{{item.descricao}}</td><td>{{item.quantidade}}</td><td>{{item.preco_unitario | currency}}</td><td>{{(item.total =item.preco_unitario * item.quantidade) | currency}}</td><td><a class="btn btn-default btn-xs" ng-disabled="view.salvar" ng-click="onClickEditarServico($index)"><i class="glyphicon glyphicon-pencil"></i> </a><a class="btn btn-default btn-xs" ng-disabled="view.salvar" ng-click="onClickServicoRemover($index)"><i class="glyphicon glyphicon-remove"></i></a></td></tr><tr ng-hide="!(dadosLov.servico.length > 0)"><td colspan="1" align="right"><strong>Desconto%:</strong></td><td colspan="1"><input type="text" id="desconto_servico" class="form-control col-lg-3" maxlength="7" ng-model="dados.desconto_servico" ui-percentage-mask="2" ng-disabled="view.salvar"> <span class="pull-right"><strong>Vlr. Desconto: </strong>{{dados.sub_total_servico.obterValorDaPorcentagem(dados.desconto_servico) | currency}}</span></td><td colspan="2"><strong>Sub-Total em serviços: </strong>{{dados.sub_total_servico=dadosLov.servico.sum('total') | currency}}</td><td colspan="2"><strong>Total em serviços: </strong>{{dados.total_servico=dados.sub_total_servico.subtrairPorcentagem(dados.desconto_servico) | currency}}</td></tr><tr ng-show="!(dadosLov.servico.length > 0)"><td colspan="6" align="center">Não há itens cadastrados</td></tr></tbody></table></div></div></fieldset>