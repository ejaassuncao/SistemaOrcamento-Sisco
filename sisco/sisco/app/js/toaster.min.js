"use strict";angular.module("toaster",["ngAnimate","ngSanitize"]).service("toaster",["$rootScope","$sce",function(t){this.popWarning=function(t,o){this.pop("warning",t,o)},this.popError=function(t,o){this.pop("error",t,o)},this.popInfo=function(t,o){this.pop("info",t,o)},this.popSuccess=function(t,o){this.pop("success",t,o)},this.publicarAdvertencia=function(t){this.pop("warning","Atenção",t)},this.publicarErro=function(t){this.pop("error","Erro",t)},this.publicarInformacao=function(t){this.pop("info","Informação",t)},this.publicarSucesso=function(t){this.pop("success","Sucesso",t)},this.pop=function(o,s,e,i,n,a){this.toast={type:o,title:s,body:e,timeout:i,bodyOutputType:n,clickHandler:a},t.$broadcast("toaster-newToast")},this.clear=function(){t.$broadcast("toaster-clearToasts")}}]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!0,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-full-width","title-class":"toast-title","message-class":"toast-message"}).directive("toasterContainer",["$compile","$timeout","$sce","toasterConfig","toaster",function(t,o,s,e,i){return{replace:!0,restrict:"EA",scope:!0,link:function(t,n,a){function r(o){switch(o.type=l["icon-classes"][o.type],o.type||(o.type=l["icon-class"]),u++,angular.extend(o,{id:u}),o.bodyOutputType=o.bodyOutputType||l["body-output-type"],o.bodyOutputType){case"trustedHtml":o.html=s.trustAsHtml(o.body);break;case"template":o.bodyTemplate=o.body||l["body-template"]}t.configureTimer(o),l["newest-on-top"]===!0?(t.toasters.unshift(o),l.limit>0&&t.toasters.length>l.limit&&t.toasters.pop()):(t.toasters.push(o),l.limit>0&&t.toasters.length>l.limit&&t.toasters.shift())}function c(s,e){s.timeout=o(function(){t.removeToast(s.id)},e)}var l,u=0;l=angular.extend({},e,t.$eval(a.toasterOptions)),t.config={position:l["position-class"],title:l["title-class"],message:l["message-class"],tap:l["tap-to-dismiss"],closeButton:l["close-button"]},t.configureTimer=function(t){var o="number"==typeof t.timeout?t.timeout:l["time-out"];o>0&&c(t,o)},t.toasters=[],t.$on("toaster-newToast",function(){r(i.toast)}),t.$on("toaster-clearToasts",function(){t.toasters.splice(0,t.toasters.length)})},controller:["$scope","$element","$attrs",function(t){t.stopTimer=function(t){t.timeout&&(o.cancel(t.timeout),t.timeout=null)},t.restartTimer=function(o){o.timeout||t.configureTimer(o)},t.removeToast=function(o){var s=0;for(s;s<t.toasters.length&&t.toasters[s].id!==o;s++);t.toasters.splice(s,1)},t.click=function(o){if(t.config.tap===!0)if(o.clickHandler&&angular.isFunction(t.$parent.$eval(o.clickHandler))){var s=t.$parent.$eval(o.clickHandler)(o);s===!0&&t.removeToast(o.id)}else angular.isString(o.clickHandler)&&console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container."),t.removeToast(o.id)}}],template:'<div  id="toast-container" ng-class="config.position"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)"  ng-mouseout="restartTimer(toaster)"><button class="toast-close-button" ng-show="config.closeButton">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default ng-bind-html="toaster.body"></div></div></div></div>'}}]);